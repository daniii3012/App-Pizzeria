<div class="container mt-3 mb-3">
    <!-- AÃ±adir nuevo producto -->
    <div *ngIf="!updateProducto" class="card">
        <div class="card-body">
            <div class="card-text">
                <h5 class="card-title">Agregar Producto</h5>
                <div class="card-text">
                    <button *ngIf="!addProducto" type="button" (click)="addProducto = !addProducto" class="btn btn-outline-primary btn-sm">Nuevo</button>
                    <form *ngIf="addProducto">
                        <div class="form-group">
                            <div class="input-group mb-2">
                                <div class="input-group-prepend">
                                    <div class="input-group-text"><i class="mdi mdi-text"></i></div>
                                </div>
                                <input type="text" [(ngModel)]="id_producto" name="id_producto" class="form-control" id="inputIDProducto" placeholder="ID Producto">
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="input-group mb-2">
                                <div class="input-group-prepend">
                                    <div class="input-group-text"><i class="mdi mdi-text"></i></div>
                                </div>
                                <input type="text" [(ngModel)]="nombre" name="nombre" class="form-control" id="inputNombre" placeholder="Nombre del producto">
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="input-group mb-2">
                                <div class="input-group-prepend">
                                    <div class="input-group-text"><i class="mdi mdi-text"></i></div>
                                </div>
                                <select [(ngModel)]="tipo" name="tipo" class="browser-default custom-select">
                                    <option class="tipo" value="Tipo" disabled selected>Tipo</option>
                                    <option class="tipo" value="Pizza">Pizza</option>
                                    <option class="tipo" value="Bebida">Bebida</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="input-group mb-2">
                                <div class="input-group-prepend">
                                    <div class="input-group-text"><i class="mdi mdi-text"></i></div>
                                </div>
                                <input type="text" [(ngModel)]="imagen" name="imagen" class="form-control" id="inputImagen" placeholder="Imagen del producto">
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="input-group mb-2">
                                <div class="input-group-prepend">
                                    <div class="input-group-text"><i class="mdi mdi-text"></i></div>
                                </div>
                                <input type="number" [(ngModel)]="precio" name="precio" class="form-control" id="inputPrecio" placeholder="Precio del producto">
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="input-group mb-2">
                                <div class="input-group-prepend">
                                    <div class="input-group-text"><i class="mdi mdi-text"></i></div>
                                </div>
                                <input type="number" [(ngModel)]="stock" name="stock" class="form-control" id="inputStock" placeholder="Stock">
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-auto">
                                <button type="button" (click)="agregarProducto()" class="btn btn-outline-success btn-sm" [disabled]="!id_producto || !nombre || !imagen || !precio || (tipo == 'Tipo')">Agregar</button>
                            </div>
                            <div class="col text-right">
                                <button type="button" (click)="addProducto = !addProducto" class="btn btn-outline-danger btn-sm">Cancelar</button>
                            </div>
                        </div>

                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Modificar producto -->
    <div *ngIf="updateProducto" class="card">
        <div class="card-body">
            <div class="card-text">
                <h5 class="card-title">Modificar Producto</h5>
                <div class="card-text">
                    <form>
                        <div class="form-group">
                            <div class="input-group mb-2">
                                <input type="hidden" [(ngModel)]="updatingProducto.id_producto" name="id_producto" class="form-control" id="inputIDProducto" placeholder="ID Producto">
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="input-group mb-2">
                                <div class="input-group-prepend">
                                    <div class="input-group-text"><i class="mdi mdi-text"></i></div>
                                </div>
                                <input type="text" [(ngModel)]="updatingProducto.nombre" name="nombre" class="form-control" id="inputNombre" placeholder="Nombre del producto">
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="input-group mb-2">
                                <div class="input-group-prepend">
                                    <div class="input-group-text"><i class="mdi mdi-text"></i></div>
                                </div>
                                <input type="text" [(ngModel)]="updatingProducto.imagen" name="imagen" class="form-control" id="inputImagen" placeholder="Imagen del producto">
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="input-group mb-2">
                                <div class="input-group-prepend">
                                    <div class="input-group-text"><i class="mdi mdi-text"></i></div>
                                </div>
                                <input type="number" [(ngModel)]="updatingProducto.precio" name="precio" class="form-control" id="inputPrecio" placeholder="Precio del producto">
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="input-group mb-2">
                                <div class="input-group-prepend">
                                    <div class="input-group-text"><i class="mdi mdi-text"></i></div>
                                </div>
                                <input type="number" [(ngModel)]="updatingProducto.stock" name="stock" class="form-control" id="inputStock" placeholder="Stock">
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-auto">
                                <button type="button" (click)="modificarProducto(updatingProducto)" class="btn btn-outline-success btn-sm" [disabled]="!updatingProducto.nombre || !updatingProducto.imagen || !updatingProducto.precio || !updatingProducto.stock">Modificar</button>
                            </div>
                            <div class="col text-right">
                                <button type="button" (click)="updateProducto = !updateProducto" class="btn btn-outline-danger btn-sm">Cancelar</button>
                            </div>
                        </div>

                    </form>
                </div>
            </div>
        </div>
    </div>

    <h5 class="mt-3">Lista de Productos</h5>
    <!-- Lista de productos -->
    <div *ngFor="let producto of productos | async">
        <hr>
        <div class="row no-gutters">
            <div class="col-md-2 col-4 p-0 m-0">
                <img src="{{ producto.imagen }}" class="card-img" alt="{{ producto.nombre }}">
            </div>
            <div class="col-md-10 col-8">
                <div class="card-body">
                    <h5 class="card-title">{{ producto.nombre }}</h5>
                    <div class="card-text">
                        <span>ID: {{ producto.id_producto }}</span><br>
                        <span>Tipo: {{ producto.tipo }}</span><br>
                        <span>Precio: {{ producto.precio }}</span><br>
                        <span>Stock: {{ producto.stock }}</span>
                    </div>
                    <button type="button" (click)="update(producto)" class="btn btn-outline-info btn-sm">Modificar</button>
                    <button type="button" (click)="eliminarProducto(producto.id_producto)" class="btn btn-outline-danger btn-sm ml-2">Eliminar</button>
                </div>
            </div>
        </div>
    </div>
</div>